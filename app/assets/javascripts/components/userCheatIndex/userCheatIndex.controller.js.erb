angular
  .module('maphack')
  .controller('UserCheatIndexController', UserCheatIndexController);

UserCheatIndexController.$inject = ['cheatsService', '$stateParams', '$window'];


function UserCheatIndexController(cheatsService, $stateParams, $window) {
 	var vm = this;

    vm.cheats = [];
    vm.currentUser = {};
    vm.deleteCheat = deleteCheat;

    onLoad();

    function onLoad() {
        cheatsService
            .getCheatsById($stateParams.id)
            .then(function(res){
                console.log(res);
                vm.cheats = res.data.cheats;
                vm.currentUser = res.data.currentUser;
                vm.userArray = res.data.user_array;
        });
        

    }

    function deleteCheat(cheat) {
        var id = cheat.id
        cheatsService
            .deleteCheat(id)
            .then(function(res){
                console.log('Your cheat has been deleted')
                $window.location.reload();
            })
    }

}