angular
  .module('maphack')
  .controller('UserCheatIndexController', UserCheatIndexController);

UserCheatIndexController.$inject = ['cheatsService', '$stateParams', '$window'];


function UserCheatIndexController(cheatsService, $stateParams, $window) {
 	var vm = this;

    var map = [];

    vm.cheats = [];
    vm.currentUser = {};
    vm.userArray = [];
    vm.deleteCheat = deleteCheat;

    var mark= {};
    var closestMarker = null;
    var index = 0;

    var cheatMarkersArray = [];
    var cheatLatLng = [];
    var eol = null; 

    var polyline = null;
    var poly2 = null;

    vm.origTime = 0;
    vm.origDist = 0;
    vm.hackTime = 0;
    vm.hackDist = 0;

    onLoad();

    function onLoad() {
        cheatsService
            .getCheatsById($stateParams.id)
            .then(function(res){
                console.log(res);
                vm.cheats = res.data.cheats;
                vm.currentUser = res.data.currentUser;
                vm.userArray = res.data.user_array;
        });
        

    }

    function deleteCheat(cheat) {
        var id = cheat.id
        cheatsService
            .deleteCheat(id)
            .then(function(res){
                console.log('Your cheat has been deleted')
                $window.location.reload();
            })
    }

}